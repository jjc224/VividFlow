<html>
<head>
<script src="js/jquery-3.0.0.min.js"></script>
<script src="js/Algorithm.js"></script>
<script src="js/Draw.js"></script>
<script src="js/Control.js"></script>
<script>
//var g_algorithm_id == {{ ALGORITHM_ID }};
function init_algorithm() {
    // Create algorithm
    //var jsonTest = '{"_Nodes": [{"_Node_Name": "Node1", "_InputSockets": [{"_ObjectID": "0.215758519873", "_DataType": "String", "_Name": "Output", "_Required": false, "_ArgumentNumber": 1, "_NodeId": "0.827120327614", "ObjectType": "NodeIOSocket"}, {"_ObjectID": "0.737757341123", "_DataType": "String", "_Name": "Output", "_Required": false, "_ArgumentNumber": 2, "_NodeId": "0.827120327614", "ObjectType": "NodeIOSocket"}], "_ObjectID": "0.827120327614", "_OutputSockets": [{"_ObjectID": "0.852037921872", "_DataType": "String", "_Name": "Output", "_Required": false, "_ArgumentNumber": 1, "_NodeId": "0.827120327614", "ObjectType": "NodeIOSocket"}], "_ModuleId": null, "_PosX": 0, "_PosY": 0, "ObjectType": "StringTestNode"}, {"_Node_Name": "Node2", "_InputSockets": [{"_ObjectID": "0.712889852252", "_DataType": "String", "_Name": "Output", "_Required": false, "_ArgumentNumber": 1, "_NodeId": "0.163181502025", "ObjectType": "NodeIOSocket"}], "_ObjectID": "0.163181502025", "_OutputSockets": [{"_ObjectID": "0.843875853078", "_DataType": "String", "_Name": "Output", "_Required": false, "_ArgumentNumber": 1, "_NodeId": "0.163181502025", "ObjectType": "NodeIOSocket"}], "_ModuleId": null, "_PosX": 0, "_PosY": 0, "ObjectType": "StringTestNode"}, {"_Node_Name": "Node3", "_InputSockets": [], "_ObjectID": "0.458104304074", "_OutputSockets": [{"_ObjectID": "0.668679642163", "_DataType": "String", "_Name": "Output", "_Required": false, "_ArgumentNumber": 1, "_NodeId": "0.458104304074", "ObjectType": "NodeIOSocket"}], "_ModuleId": null, "_PosX": 0, "_PosY": 0, "ObjectType": "StringTestNode"}, {"_Node_Name": "Node4", "_InputSockets": [], "_ObjectID": "0.0418882065203", "_OutputSockets": [{"_ObjectID": "0.250475798495", "_DataType": "String", "_Name": "Output", "_Required": false, "_ArgumentNumber": 1, "_NodeId": "0.0418882065203", "ObjectType": "NodeIOSocket"}], "_ModuleId": null, "_PosX": 0, "_PosY": 0, "ObjectType": "StringTestNode"}, {"_Node_Name": "Node5", "_InputSockets": [{"_ObjectID": "0.984156732888", "_DataType": "String", "_Name": "Output", "_Required": false, "_ArgumentNumber": 1, "_NodeId": "0.66613719851", "ObjectType": "NodeIOSocket"}], "_ObjectID": "0.66613719851", "_OutputSockets": [{"_ObjectID": "0.0829148269887", "_DataType": "String", "_Name": "Output", "_Required": false, "_ArgumentNumber": 1, "_NodeId": "0.66613719851", "ObjectType": "NodeIOSocket"}], "_ModuleId": null, "_PosX": 0, "_PosY": 0, "ObjectType": "StringTestNode"}, {"_Value": 23, "_InputSockets": [{"_ObjectID": "0.468896970094", "_DataType": "Integer", "_Name": "Output", "_Required": false, "_ArgumentNumber": 0, "_NodeId": "0.243041239449", "ObjectType": "NodeIOSocket"}], "_ObjectID": "0.243041239449", "_DataType": "Integer", "_OutputSockets": [], "_PosX": 0, "_PosY": 0, "ObjectType": "ValueNode"}], "_Links": [{"_Out_Node_Id": "0.163181502025", "_ObjectID": "0.651521621056", "_In_Node_Id": "0.827120327614", "_Out_Socket_Id": "0.843875853078", "_In_Socket_Id": "0.215758519873", "ObjectType": "Link"}, {"_Out_Node_Id": "0.458104304074", "_ObjectID": "0.681048750489", "_In_Node_Id": "0.827120327614", "_Out_Socket_Id": "0.668679642163", "_In_Socket_Id": "0.737757341123", "ObjectType": "Link"}, {"_Out_Node_Id": "0.0418882065203", "_ObjectID": "0.00411293361501", "_In_Node_Id": "0.163181502025", "_Out_Socket_Id": "0.250475798495", "_In_Socket_Id": "0.712889852252", "ObjectType": "Link"}, {"_Out_Node_Id": "0.163181502025", "_ObjectID": "0.850493651329", "_In_Node_Id": "0.66613719851", "_Out_Socket_Id": "0.843875853078", "_In_Socket_Id": "0.984156732888", "ObjectType": "Link"}], "_ObjectID": "0.172865772584", "_AlgorithmName": "Test Algorithm", "ObjectType": "Algorithm"}';
    //var jsonTest = '{"_Nodes": [{"_Node_Name": "Node1", "_InputSockets": [{"_ObjectID": "0.711196963317", "_DataType": "String", "_Name": "Output", "_Required": false, "_ArgumentNumber": 1, "_OwnerNodeId": "0.509584754457", "ObjectType": "NodeIOSocket"}, {"_ObjectID": "0.612248955965", "_DataType": "String", "_Name": "Output", "_Required": false, "_ArgumentNumber": 2, "_OwnerNodeId": "0.509584754457", "ObjectType": "NodeIOSocket"}], "_ObjectID": "0.509584754457", "_OutputSockets": [{"_ObjectID": "0.114729205702", "_DataType": "String", "_Name": "Output", "_Required": false, "_ArgumentNumber": 1, "_OwnerNodeId": "0.509584754457", "ObjectType": "NodeIOSocket"}], "_ModuleId": null, "_PosX": 0, "_PosY": 0, "ObjectType": "StringTestNode"}, {"_Node_Name": "Node2", "_InputSockets": [{"_ObjectID": "0.552629630653", "_DataType": "String", "_Name": "Output", "_Required": false, "_ArgumentNumber": 1, "_OwnerNodeId": "0.0219765860289", "ObjectType": "NodeIOSocket"}], "_ObjectID": "0.0219765860289", "_OutputSockets": [{"_ObjectID": "0.723020435549", "_DataType": "String", "_Name": "Output", "_Required": false, "_ArgumentNumber": 1, "_OwnerNodeId": "0.0219765860289", "ObjectType": "NodeIOSocket"}], "_ModuleId": null, "_PosX": 0, "_PosY": 0, "ObjectType": "StringTestNode"}, {"_Node_Name": "Node3", "_InputSockets": [], "_ObjectID": "0.465383768327", "_OutputSockets": [{"_ObjectID": "0.195663637935", "_DataType": "String", "_Name": "Output", "_Required": false, "_ArgumentNumber": 1, "_OwnerNodeId": "0.465383768327", "ObjectType": "NodeIOSocket"}], "_ModuleId": null, "_PosX": 0, "_PosY": 0, "ObjectType": "StringTestNode"}, {"_Node_Name": "Node4", "_InputSockets": [], "_ObjectID": "0.0549616363085", "_OutputSockets": [{"_ObjectID": "0.365033258614", "_DataType": "String", "_Name": "Output", "_Required": false, "_ArgumentNumber": 1, "_OwnerNodeId": "0.0549616363085", "ObjectType": "NodeIOSocket"}], "_ModuleId": null, "_PosX": 0, "_PosY": 0, "ObjectType": "StringTestNode"}, {"_Node_Name": "Node5", "_InputSockets": [{"_ObjectID": "0.570632894723", "_DataType": "String", "_Name": "Output", "_Required": false, "_ArgumentNumber": 1, "_OwnerNodeId": "0.195308552177", "ObjectType": "NodeIOSocket"}], "_ObjectID": "0.195308552177", "_OutputSockets": [{"_ObjectID": "0.509081553008", "_DataType": "String", "_Name": "Output", "_Required": false, "_ArgumentNumber": 1, "_OwnerNodeId": "0.195308552177", "ObjectType": "NodeIOSocket"}], "_ModuleId": null, "_PosX": 0, "_PosY": 0, "ObjectType": "StringTestNode"}, {"_Value": 23, "_InputSockets": [{"_ObjectID": "0.470905082632", "_DataType": "Integer", "_Name": "Output", "_Required": false, "_ArgumentNumber": 0, "_OwnerNodeId": "0.0963301177146", "ObjectType": "NodeIOSocket"}], "_ObjectID": "0.0963301177146", "_DataType": "Integer", "_OutputSockets": [], "_PosX": 0, "_PosY": 0, "ObjectType": "ValueNode"}], "_Links": [{"_Out_Node_Id": "0.0219765860289", "_ObjectID": "0.528267114008", "_In_Node_Id": "0.509584754457", "_Out_Socket_Id": "0.723020435549", "_In_Socket_Id": "0.711196963317", "ObjectType": "Link"}, {"_Out_Node_Id": "0.465383768327", "_ObjectID": "0.650707573661", "_In_Node_Id": "0.509584754457", "_Out_Socket_Id": "0.195663637935", "_In_Socket_Id": "0.612248955965", "ObjectType": "Link"}, {"_Out_Node_Id": "0.0549616363085", "_ObjectID": "0.843939951377", "_In_Node_Id": "0.0219765860289", "_Out_Socket_Id": "0.365033258614", "_In_Socket_Id": "0.552629630653", "ObjectType": "Link"}, {"_Out_Node_Id": "0.0219765860289", "_ObjectID": "0.768619115474", "_In_Node_Id": "0.195308552177", "_Out_Socket_Id": "0.723020435549", "_In_Socket_Id": "0.570632894723", "ObjectType": "Link"}], "_ObjectID": "0.855728915432", "_AlgorithmName": "Test Algorithm", "ObjectType": "Algorithm"}';
    var jsonTest = '{"ObjectType":"Algorithm","_ObjectID":"0.855728915432","_AlgorithmName":"Test Algorithm","_Links":[{"ObjectType":"Link","_ObjectID":"0.528267114008","_In_Node_Id":"0.509584754457","_In_Socket_Id":"0.711196963317","_Out_Node_Id":"0.0219765860289","_Out_Socket_Id":"0.723020435549"},{"ObjectType":"Link","_ObjectID":"0.650707573661","_In_Node_Id":"0.509584754457","_In_Socket_Id":"0.612248955965","_Out_Node_Id":"0.465383768327","_Out_Socket_Id":"0.195663637935"},{"ObjectType":"Link","_ObjectID":"0.843939951377","_In_Node_Id":"0.0219765860289","_In_Socket_Id":"0.552629630653","_Out_Node_Id":"0.0549616363085","_Out_Socket_Id":"0.365033258614"},{"ObjectType":"Link","_ObjectID":"0.768619115474","_In_Node_Id":"0.195308552177","_In_Socket_Id":"0.570632894723","_Out_Node_Id":"0.0219765860289","_Out_Socket_Id":"0.723020435549"}],"_Nodes":[{"ObjectType":"StringTestNode","_ObjectID":"0.509584754457","_PosX":535,"_PosY":236,"_InputSockets":[{"ObjectType":"NodeIOSocket","_ObjectID":"0.711196963317","_ArgumentNumber":1,"_Name":"Output","_DataType":"String","_OwnerNodeId":"0.509584754457","_Required":false},{"ObjectType":"NodeIOSocket","_ObjectID":"0.612248955965","_ArgumentNumber":2,"_Name":"Output","_DataType":"String","_OwnerNodeId":"0.509584754457","_Required":false}],"_OutputSockets":[{"ObjectType":"NodeIOSocket","_ObjectID":"0.114729205702","_ArgumentNumber":1,"_Name":"Output","_DataType":"String","_OwnerNodeId":"0.509584754457","_Required":false}],"_ModuleId":null,"_Node_Name":"Node1"},{"ObjectType":"StringTestNode","_ObjectID":"0.0219765860289","_PosX":269,"_PosY":66,"_InputSockets":[{"ObjectType":"NodeIOSocket","_ObjectID":"0.552629630653","_ArgumentNumber":1,"_Name":"Output","_DataType":"String","_OwnerNodeId":"0.0219765860289","_Required":false}],"_OutputSockets":[{"ObjectType":"NodeIOSocket","_ObjectID":"0.723020435549","_ArgumentNumber":1,"_Name":"Output","_DataType":"String","_OwnerNodeId":"0.0219765860289","_Required":false}],"_ModuleId":null,"_Node_Name":"Node2"},{"ObjectType":"StringTestNode","_ObjectID":"0.465383768327","_PosX":270,"_PosY":237,"_InputSockets":[],"_OutputSockets":[{"ObjectType":"NodeIOSocket","_ObjectID":"0.195663637935","_ArgumentNumber":1,"_Name":"Output","_DataType":"String","_OwnerNodeId":"0.465383768327","_Required":false}],"_ModuleId":null,"_Node_Name":"Node3"},{"ObjectType":"StringTestNode","_ObjectID":"0.0549616363085","_PosX":24,"_PosY":66,"_InputSockets":[],"_OutputSockets":[{"ObjectType":"NodeIOSocket","_ObjectID":"0.365033258614","_ArgumentNumber":1,"_Name":"Output","_DataType":"String","_OwnerNodeId":"0.0549616363085","_Required":false}],"_ModuleId":null,"_Node_Name":"Node4"},{"ObjectType":"StringTestNode","_ObjectID":"0.195308552177","_PosX":535,"_PosY":66,"_InputSockets":[{"ObjectType":"NodeIOSocket","_ObjectID":"0.570632894723","_ArgumentNumber":1,"_Name":"Output","_DataType":"String","_OwnerNodeId":"0.195308552177","_Required":false}],"_OutputSockets":[{"ObjectType":"NodeIOSocket","_ObjectID":"0.509081553008","_ArgumentNumber":1,"_Name":"Output","_DataType":"String","_OwnerNodeId":"0.195308552177","_Required":false}],"_ModuleId":null,"_Node_Name":"Node5"},{"ObjectType":"ValueNode","_ObjectID":"0.0963301177146","_PosX":28,"_PosY":238,"_InputSockets":[{"ObjectType":"NodeIOSocket","_ObjectID":"0.470905082632","_ArgumentNumber":1,"_Name":"Output","_DataType":"Integer","_OwnerNodeId":"0.0963301177146","_Required":false}],"_OutputSockets":[],"_DataType":"Integer","_Value":23}]}';

    var jsonParsed = JSON.parse(jsonTest);
    g_algo = SerialObjectTypes.build_object_from_json(jsonParsed);
    g_algo.relink_algorithm();
    console.log(g_algo);

    // Create draw object with algorithm
    g_drawalgo = new DrawAlgorithm(g_algo);

    // Draw algorithm
    g_drawalgo.draw();
}

$(document).ready(function(){
	init_algorithm_canvas();
	init_algorithm();
});
</script>

<style>
.unselectable {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    cursor: default;
}
</style>

</head>
<body>
    <table class="unselectable" border="1">
        <tr><td colspan="2"><div style="height: 100px; width: 100%">Menu</div></td></tr>
        <tr>
            <td><div style="height: 800px; width:300px">Node Selector</div></td>
            <td><canvas id="myCanvas" width="1000" height="800"></canvas></td>
        </tr>
    </table>
</body>
</html>
